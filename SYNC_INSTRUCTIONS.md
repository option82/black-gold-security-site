# Инструкция по синхронизации данных

## Как работает система хранения

Все изменения на сайте сохраняются **автоматически в браузере** (localStorage). Это означает:

✅ **Работает без интернета** - сайт полностью автономен  
✅ **Не требует подписки** - никаких платных функций  
✅ **Быстрое сохранение** - изменения сохраняются мгновенно  

⚠️ **Важно:** Данные привязаны к браузеру и домену. Если открыть сайт в другом браузере или на другом устройстве, изменений там не будет.

---

## Синхронизация между устройствами

### Способ 1: Экспорт/Импорт файла

**На устройстве с изменениями:**
1. Войдите в режим редактирования (admin123)
2. Нажмите кнопку **"Скачать"**
3. Сохранится файл `site-backup-ДАТА.json`

**На новом устройстве:**
1. Откройте сайт
2. Войдите в режим редактирования (admin123)
3. Нажмите кнопку **"Загрузить"**
4. Выберите скачанный файл
5. Все изменения применятся мгновенно!

### Способ 2: Копирование данных

1. На устройстве с изменениями нажмите **"Копировать данные"**
2. Данные скопируются в буфер обмена
3. Отправьте их себе любым способом (email, мессенджер)
4. На новом устройстве создайте файл с этими данными
5. Используйте кнопку "Загрузить" для импорта

---

## Редактирование файла напрямую

Если вы разработчик, можете редактировать файл `public/site-data.json` напрямую:

```bash
# 1. Откройте файл
nano public/site-data.json

# 2. Отредактируйте нужные данные

# 3. Сохраните изменения

# 4. Пересоберите проект (если нужно)
npm run build
```

После этого все пользователи увидят обновленные данные при первой загрузке.

---

## Резервное копирование

### Регулярно делайте бэкапы!

1. Заходите в режим редактирования раз в неделю
2. Нажимайте "Скачать"
3. Храните файлы в надежном месте (облако, внешний диск)

### Восстановление из бэкапа

1. Найдите нужный файл бэкапа
2. Войдите в режим редактирования
3. Нажмите "Загрузить"
4. Выберите файл бэкапа
5. Данные восстановятся

---

## Решение проблем

### Изменения не сохраняются
- Проверьте, что localStorage не заблокирован в браузере
- Проверьте, достаточно ли места (localStorage ~5-10 MB)
- Попробуйте в режиме инкогнито (но там данные не сохранятся между сессиями)

### Данные пропали после очистки браузера
- Очистка данных браузера удаляет localStorage
- Восстановите из последнего бэкапа
- **Решение:** Регулярно делайте бэкапы!

### Не работает на другом устройстве
- Это нормально! Данные не синхронизируются автоматически
- Используйте экспорт/импорт для переноса
- Или редактируйте `public/site-data.json` напрямую

---

## Для разработчиков

### Структура данных

Все данные хранятся в одном JSON объекте:

```json
{
  "logo": "...",
  "hero": { "title": "...", "subtitle": "..." },
  "about": { "title": "...", "description": "..." },
  "services": { "title": "...", "items": [...] },
  "portfolio": { "title": "...", "items": [...] },
  "cases": { "title": "...", "items": [...] },
  "blog": { "title": "...", "posts": [...] },
  "contacts": { "title": "...", "contacts": [...] },
  "footer": { "text": "..." }
}
```

### API

```typescript
import { contentStore } from '@/lib/contentStore';

// Получить все данные
const data = await contentStore.getAllContent();

// Сохранить данные секции
await contentStore.saveContent('hero', { title: 'New Title' });

// Получить данные секции
const hero = await contentStore.getContent('hero');
```

---

## Часто задаваемые вопросы

**Q: Могу ли я использовать базу данных?**  
A: Да, но для этого нужна активная подписка на poehali.dev для backend функций.

**Q: Данные хранятся в облаке?**  
A: Нет, только локально в браузере. Для синхронизации используйте экспорт/импорт.

**Q: Сколько данных можно хранить?**  
A: localStorage позволяет хранить ~5-10 MB. Этого достаточно для текста и небольших изображений (в base64).

**Q: Изображения тоже хранятся в браузере?**  
A: Да, в формате base64. Большие изображения лучше хранить на внешнем хостинге.

---

## Поддержка

Если возникли вопросы:
- Telegram: https://t.me/+QgiLIa1gFRY4Y2Iy
- Email: support@poehali.dev
