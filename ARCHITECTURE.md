# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

## ğŸ“Š Ğ¡Ñ…ĞµĞ¼Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  React Ğ²ĞµÑ€ÑĞ¸Ñ   â”‚    â”‚ Standalone HTML â”‚
        â”‚  (Vite + TS)    â”‚    â”‚   (Vanilla JS)  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                      â”‚
                 â”‚                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ Ğ¥Ğ ĞĞĞ•ĞĞ˜Ğ¯                â”‚
        â”‚                                         â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
        â”‚  â”‚ localStorageâ”‚  â”‚   Ğ‘Ğ” (PG)   â”‚     â”‚
        â”‚  â”‚  (Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€)  â”‚  â”‚  (Ğ¾Ğ±Ğ»Ğ°ĞºĞ¾)   â”‚     â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚
        â”‚         â”‚                 â”‚            â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
        â”‚                  â”‚                     â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
        â”‚         â”‚ site-data.json  â”‚            â”‚
        â”‚         â”‚   (Git repo)    â”‚            â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° (Priority Chain)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ â”‚
â”‚ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚    â”‚
â”‚ ÑĞ°Ğ¹Ñ‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° localStorage             â”‚
â”‚    âœ“ Ğ•ÑÑ‚ÑŒ? â†’ ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾     â”‚
â”‚    âœ— ĞĞµÑ‚? â†’ Ğ˜Ğ´Ñ‚Ğ¸ Ğ´Ğ°Ğ»ÑŒÑˆĞµ             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğº Ğ‘Ğ” Ñ‡ĞµÑ€ĞµĞ· API             â”‚
â”‚    âœ“ ĞÑ‚Ğ²ĞµÑ‚Ğ¸Ğ»? â†’ ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ + ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒâ”‚
â”‚    âœ— ĞÑˆĞ¸Ğ±ĞºĞ°? â†’ Ğ˜Ğ´Ñ‚Ğ¸ Ğ´Ğ°Ğ»ÑŒÑˆĞµ          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° site-data.json (fallback)â”‚
â”‚    âœ“ Ğ’ÑĞµĞ³Ğ´Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½                 â”‚
â”‚    âœ— ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¸Ğ· Ğ±Ğ°Ğ½Ğ´Ğ»Ğ°             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ (Multi-target)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ â”‚
â”‚ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµÑ‚  â”‚
â”‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ contentStore.saveContent()           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                             â”‚
       â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ localStorage    â”‚        â”‚ Backend API      â”‚
â”‚ (Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾)   â”‚        â”‚ POST /content    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ PostgreSQL       â”‚
                           â”‚ UPSERT Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ    â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ React Ğ²ĞµÑ€ÑĞ¸Ğ¸

### Frontend (src/)

```
App.tsx
  â””â”€ Index.tsx (Ğ³Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°)
      â”œâ”€ Header
      â”‚   â”œâ”€ Logo (Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹)
      â”‚   â””â”€ Menu (Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ)
      â”‚
      â”œâ”€ ContentSections
      â”‚   â”œâ”€ HeroSection (Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹)
      â”‚   â”œâ”€ AboutSection (Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹)
      â”‚   â”œâ”€ ServicesSection (Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹ + DnD)
      â”‚   â”œâ”€ PortfolioSection (Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹)
      â”‚   â”œâ”€ CasesSection (Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹)
      â”‚   â”œâ”€ BlogSection (Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹)
      â”‚   â””â”€ ContactsSection (Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹)
      â”‚
      â”œâ”€ Footer
      â”‚
      â””â”€ AdminPanel
          â”œâ”€ AuthDialog (Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ)
          â”œâ”€ ControlPanel (ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ)
          â””â”€ SyncManager (ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ)
              â”œâ”€ Ğ¤Ğ°Ğ¹Ğ» â†’ Ğ‘Ğ”
              â””â”€ Ğ‘Ğ” â†’ Ğ¤Ğ°Ğ¹Ğ»
```

### State Management

```
Index.tsx state
  â”‚
  â”œâ”€ content: { logo, hero, services, ... }
  â”œâ”€ isAdminMode: boolean
  â”œâ”€ activeSection: string
  â””â”€ mobileMenuOpen: boolean
       â”‚
       â””â”€ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· useState/useEffect
           â”‚
           â”œâ”€ saveContent() â†’ contentStore
           â””â”€ loadContent() â†’ contentStore
```

### Storage Layer (lib/)

```
storage.ts (High-level API)
  â”‚
  â”œâ”€ saveContent()
  â”œâ”€ loadContent()
  â”œâ”€ exportContent()
  â””â”€ downloadContentBackup()
      â”‚
      â””â”€ contentStore.ts (Low-level)
          â”‚
          â”œâ”€ getAllContent()
          â”‚   â”œâ”€ Check cache
          â”‚   â”œâ”€ Try DB (fetch API)
          â”‚   â””â”€ Fallback to JSON
          â”‚
          â”œâ”€ getContent(key)
          â”‚   â””â”€ Return specific section
          â”‚
          â””â”€ saveContent(key, data)
              â”œâ”€ Update cache
              â””â”€ POST to API â†’ PostgreSQL
```

---

## ğŸ“¦ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Standalone Ğ²ĞµÑ€ÑĞ¸Ğ¸

### Structure (standalone/)

```
index.html
  â”‚
  â”œâ”€ <head>
  â”‚   â”œâ”€ Tailwind CSS (CDN)
  â”‚   â”œâ”€ Lucide Icons (CDN)
  â”‚   â””â”€ styles.css
  â”‚
  â”œâ”€ <body>
  â”‚   â”œâ”€ Header (Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ)
  â”‚   â”œâ”€ Sections (ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚)
  â”‚   â”œâ”€ Footer
  â”‚   â”œâ”€ Admin Panel (Ğ¼Ğ¾Ğ´Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ĞºĞ½Ğ¾)
  â”‚   â””â”€ Toast Notifications
  â”‚
  â”œâ”€ <script src="js/app.js">
  â”‚   â”œâ”€ loadData()
  â”‚   â”œâ”€ renderContent()
  â”‚   â”œâ”€ initNavigation()
  â”‚   â””â”€ handleScroll()
  â”‚
  â””â”€ <script src="js/admin.js">
      â”œâ”€ initAdmin()
      â”œâ”€ handleAuth()
      â”œâ”€ enableEditing()
      â”œâ”€ saveChanges()
      â””â”€ exportJSON()
```

### Data Flow (Standalone)

```
1. Page Load
   â”‚
   â”œâ”€ loadData()
   â”‚   â”œâ”€ localStorage.getItem('site-data')
   â”‚   â””â”€ fetch('data/site-data.json')
   â”‚
   â”œâ”€ renderContent(data)
   â”‚   â””â”€ Populate HTML elements
   â”‚
   â””â”€ initNavigation()

2. Admin Edit
   â”‚
   â”œâ”€ User logs in
   â”‚   â””â”€ Check password
   â”‚
   â”œâ”€ enableEditing()
   â”‚   â””â”€ contenteditable="true"
   â”‚
   â”œâ”€ User edits content
   â”‚   â””â”€ Auto-save to localStorage
   â”‚
   â””â”€ exportJSON()
       â””â”€ Download site-data.json
```

---

## ğŸ”Œ Backend API

### Endpoints

```
/backend/content/
  â”‚
  â”œâ”€ GET /
  â”‚   â””â”€ Returns: ALL content from DB
  â”‚
  â”œâ”€ GET /?key=hero
  â”‚   â””â”€ Returns: Specific section
  â”‚
  â””â”€ POST /
      â”œâ”€ Body: { key: "hero", data: {...} }
      â””â”€ Action: UPSERT to DB
```

```
/backend/sync-content/
  â”‚
  â”œâ”€ GET /?direction=db-to-json
  â”‚   â””â”€ Returns: Export from DB
  â”‚
  â””â”€ POST /
      â”œâ”€ Body: { data: {...all sections...} }
      â””â”€ Action: Bulk UPSERT to DB
```

### Database Schema

```sql
CREATE TABLE site_content (
  content_key VARCHAR PRIMARY KEY,  -- 'logo', 'hero', 'services', etc.
  content_data JSONB NOT NULL,      -- Actual content
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Indexes
CREATE INDEX idx_updated_at ON site_content(updated_at);
```

### Backend Function Structure

```
backend/content/
  â”œâ”€ index.py
  â”‚   â”œâ”€ handler(event, context)
  â”‚   â”œâ”€ get_db_connection()
  â”‚   â””â”€ get_cors_headers()
  â”‚
  â”œâ”€ requirements.txt
  â”‚   â””â”€ psycopg2-binary
  â”‚
  â””â”€ tests.json

backend/sync-content/
  â”œâ”€ index.py
  â”‚   â”œâ”€ handler(event, context)
  â”‚   â”œâ”€ sync_to_json(conn)
  â”‚   â””â”€ sync_from_json(conn, data)
  â”‚
  â”œâ”€ requirements.txt
  â””â”€ tests.json
```

---

## ğŸ”§ Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ (scripts/)

### sync-to-db.js

```javascript
Read public/site-data.json
  â”‚
  â”œâ”€ Parse JSON
  â”‚
  â””â”€ POST to /sync-content
      â””â”€ Bulk insert to DB
```

### sync-from-db.js

```javascript
GET /sync-content?direction=db-to-json
  â”‚
  â”œâ”€ Receive data from DB
  â”‚
  â”œâ”€ Write to public/site-data.json
  â”‚
  â””â”€ Write to standalone/data/site-data.json
```

### auto-sync.js

```javascript
setInterval(10 seconds)
  â”‚
  â”œâ”€ getFileHash(site-data.json)
  â”‚   â””â”€ Compare with lastHash
  â”‚       â””â”€ Changed? â†’ syncLocalToDb()
  â”‚
  â””â”€ getDbTimestamp()
      â””â”€ Compare with lastTimestamp
          â””â”€ Changed? â†’ syncDbToLocal()
```

---

## ğŸ” Security Architecture

### Authentication Flow

```
React Version:
  User clicks "Ğ’Ğ¾Ğ¹Ñ‚Ğ¸ Ğ² Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºÑƒ"
    â”‚
    â”œâ”€ First time?
    â”‚   â””â”€ Prompt for password
    â”‚       â””â”€ Store hash in localStorage
    â”‚
    â””â”€ Returning?
        â””â”€ Check localStorage hash
            â””â”€ Match? â†’ Enable admin mode

Standalone Version:
  User clicks "admin"
    â”‚
    â””â”€ Prompt for password
        â””â”€ Compare with hardcoded ADMIN_PASSWORD
            â””â”€ Match? â†’ Enable editing
```

### Data Protection

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ localStorage                       â”‚
â”‚ - Isolated per domain              â”‚
â”‚ - No server access                 â”‚
â”‚ - User can clear                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL                         â”‚
â”‚ - Backend-only access              â”‚
â”‚ - HTTPS encrypted                  â”‚
â”‚ - Yandex Cloud secured             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ site-data.json                     â”‚
â”‚ - Public readable                  â”‚
â”‚ - Git version controlled           â”‚
â”‚ - No sensitive data                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Deployment Flow

### Development

```
1. npm run dev (React)
2. node scripts/auto-sync.js (background)
3. Edit content via admin panel
4. Auto-save to localStorage + DB
5. Sync to site-data.json
6. Commit to Git
```

### Production Build

```
1. npm run build
   â”‚
   â”œâ”€ Vite builds React app
   â”‚   â””â”€ dist/ folder
   â”‚
   â””â”€ Copy dist/ to hosting
       â””â”€ Configure Nginx/Apache
```

### Standalone Deploy

```
1. Upload standalone/ to hosting
   â”‚
   â”œâ”€ Any static hosting works:
   â”‚   â”œâ”€ GitHub Pages
   â”‚   â”œâ”€ Netlify
   â”‚   â”œâ”€ Vercel
   â”‚   â””â”€ Traditional hosting
   â”‚
   â””â”€ No build step needed!
```

---

## ğŸ“ˆ Performance Optimization

### Caching Strategy

```
Level 1: In-Memory Cache (cachedData)
  â”œâ”€ Fastest access
  â””â”€ Lost on page reload

Level 2: localStorage (5-10 MB)
  â”œâ”€ Persistent across reloads
  â””â”€ Per-domain isolation

Level 3: Database (PostgreSQL)
  â”œâ”€ Centralized source of truth
  â””â”€ Network latency

Level 4: Static JSON (fallback)
  â”œâ”€ Bundled with app
  â””â”€ Always available
```

### Loading Performance

```
React Version:
  - Code splitting (Vite)
  - Lazy loading images
  - Debounced autosave (1 second)
  - Cached API responses

Standalone Version:
  - No bundler overhead
  - Direct HTML parsing
  - CDN caching (Tailwind + Lucide)
  - Minimal JavaScript
```

---

## ğŸ” Monitoring & Debugging

### Debug Points

```
Frontend (React):
  - Console: "Content loaded from database"
  - Console: "Content loaded from static file"
  - localStorage key: 'site-data-source'

Frontend (Standalone):
  - Console: "Data loaded from localStorage"
  - Console: "Data loaded from file"

Backend:
  - Yandex Cloud Function logs
  - Print statements in Python
  - Database query logs

Sync Scripts:
  - stdout: "âœ… Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ X Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹"
  - stderr: "âŒ ĞÑˆĞ¸Ğ±ĞºĞ°: ..."
```

---

## ğŸ¯ Design Decisions

### Why Three Storage Layers?

1. **localStorage** - Instant user experience
2. **Database** - Centralized truth, multi-device sync
3. **JSON file** - Failover, version control, static deploy

### Why Two Versions?

1. **React** - Rich admin features, modern development
2. **Standalone** - Universal compatibility, zero dependencies

### Why Separate Sync API?

- Decouples read/write operations
- Enables bulk operations
- Simplifies migration scripts

---

**Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ÑĞ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ´Ğ»Ñ:**
- âœ… ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ½Ğ°Ğ´ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ğ¸ (3 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ)
- âœ… ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ñ‚Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (Ğ°Ğ´Ğ¼Ğ¸Ğ½-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ)
- âœ… Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ (React + Standalone)
- âœ… ĞĞ²Ñ‚Ğ¾Ğ½Ğ¾Ğ¼Ğ½Ğ¾ÑÑ‚Ğ¸ (Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ğ±ĞµĞ· ÑĞµÑ‚Ğ¸)
